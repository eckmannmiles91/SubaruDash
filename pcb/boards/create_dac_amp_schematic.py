#!/usr/bin/env python3
"""
Create the DAC/Amp schematic for SubaruDash.

Components:
- PCM5142 Quad I2S DAC (stereo output, we use 2 for 4 channels)
- 2× TPA3116D2 Class D Stereo Amplifier (50W per channel)
- Power regulation: 12V input, 5V and 3.3V rails
- I2S input from Raspberry Pi
- 4-channel speaker output

Signal flow:
  Pi I2S → PCM5142 DAC → TPA3116D2 Amp → Speakers
"""

import uuid
from pathlib import Path

def generate_uuid():
    return str(uuid.uuid4())

def create_schematic():
    """Create the complete DAC/Amp schematic."""

    sch = f'''(kicad_sch
\t(version 20231120)
\t(generator "python_script")
\t(generator_version "8.0")
\t(uuid "{generate_uuid()}")
\t(paper "A3")
\t(title_block
\t\t(title "SubaruDash DAC/Amp Module")
\t\t(date "2026-02-02")
\t\t(rev "1.0")
\t\t(comment 1 "4×50W Class D Audio System")
\t\t(comment 2 "PCM5142 DAC + 2× TPA3116D2 Amp")
\t)

\t(lib_symbols
\t\t(symbol "custom:PCM5142"
\t\t\t(pin_names (offset 1.016))
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "U"
\t\t\t\t(at 0 21.59 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "PCM5142"
\t\t\t\t(at 0 -21.59 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" "Package_QFP:TQFP-32_7x7mm_P0.8mm"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "https://www.ti.com/lit/ds/symlink/pcm5142.pdf"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "PCM5142_0_1"
\t\t\t\t(rectangle (start -12.7 20.32) (end 12.7 -20.32)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type background))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "PCM5142_1_1"
\t\t\t\t(pin power_in line (at -7.62 22.86 270) (length 2.54)
\t\t\t\t\t(name "DVDD" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_in line (at 0 -22.86 90) (length 2.54)
\t\t\t\t\t(name "DGND" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 12.7 0) (length 2.54)
\t\t\t\t\t(name "BCK" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "3" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 10.16 0) (length 2.54)
\t\t\t\t\t(name "LRCK" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "4" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 7.62 0) (length 2.54)
\t\t\t\t\t(name "DIN" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "5" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 2.54 0) (length 2.54)
\t\t\t\t\t(name "SCL" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "6" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin bidirectional line (at -15.24 0 0) (length 2.54)
\t\t\t\t\t(name "SDA" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "7" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_in line (at 7.62 22.86 270) (length 2.54)
\t\t\t\t\t(name "AVDD" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "14" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_in line (at 2.54 -22.86 90) (length 2.54)
\t\t\t\t\t(name "AGND" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "15" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 15.24 10.16 180) (length 2.54)
\t\t\t\t\t(name "OUTL+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "21" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 15.24 7.62 180) (length 2.54)
\t\t\t\t\t(name "OUTL-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "22" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 15.24 2.54 180) (length 2.54)
\t\t\t\t\t(name "OUTR+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "23" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 15.24 0 180) (length 2.54)
\t\t\t\t\t(name "OUTR-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "24" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 -7.62 0) (length 2.54)
\t\t\t\t\t(name "XSMT" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "27" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -15.24 -10.16 0) (length 2.54)
\t\t\t\t\t(name "MUTE" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "28" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "custom:TPA3116D2"
\t\t\t(pin_names (offset 1.016))
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "U"
\t\t\t\t(at 0 26.67 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "TPA3116D2"
\t\t\t\t(at 0 -26.67 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" "Package_SO:HTSSOP-32-1EP_5.1x11mm_P0.65mm_EP3.4x11mm"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "https://www.ti.com/lit/ds/symlink/tpa3116d2.pdf"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "TPA3116D2_0_1"
\t\t\t\t(rectangle (start -15.24 25.4) (end 15.24 -25.4)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type background))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "TPA3116D2_1_1"
\t\t\t\t(pin power_in line (at 0 27.94 270) (length 2.54)
\t\t\t\t\t(name "PVCC" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_in line (at 0 -27.94 90) (length 2.54)
\t\t\t\t\t(name "PGND" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 12.7 0) (length 2.54)
\t\t\t\t\t(name "INL+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "4" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 10.16 0) (length 2.54)
\t\t\t\t\t(name "INL-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "5" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 5.08 0) (length 2.54)
\t\t\t\t\t(name "INR+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "6" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 2.54 0) (length 2.54)
\t\t\t\t\t(name "INR-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "7" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 17.78 15.24 180) (length 2.54)
\t\t\t\t\t(name "OUTL+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "24" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 17.78 12.7 180) (length 2.54)
\t\t\t\t\t(name "OUTL-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "25" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 17.78 5.08 180) (length 2.54)
\t\t\t\t\t(name "OUTR+" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "28" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin output line (at 17.78 2.54 180) (length 2.54)
\t\t\t\t\t(name "OUTR-" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "29" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 -5.08 0) (length 2.54)
\t\t\t\t\t(name "~{{SD}}" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "16" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 -7.62 0) (length 2.54)
\t\t\t\t\t(name "MUTE" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "17" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 -12.7 0) (length 2.54)
\t\t\t\t\t(name "GAIN0" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "18" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin input line (at -17.78 -15.24 0) (length 2.54)
\t\t\t\t\t(name "GAIN1" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "19" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at 5.08 -27.94 90) (length 2.54)
\t\t\t\t\t(name "EP" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "33" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Device:C"
\t\t\t(pin_numbers hide)
\t\t\t(pin_names (offset 0.254) hide)
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "C"
\t\t\t\t(at 0.635 2.54 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t\t)
\t\t\t(property "Value" "C"
\t\t\t\t(at 0.635 -2.54 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t\t)
\t\t\t(property "Footprint" ""
\t\t\t\t(at 0.9652 -3.81 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "~"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "C_0_1"
\t\t\t\t(polyline
\t\t\t\t\t(pts (xy -2.032 -0.762) (xy 2.032 -0.762))
\t\t\t\t\t(stroke (width 0.508) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t\t(polyline
\t\t\t\t\t(pts (xy -2.032 0.762) (xy 2.032 0.762))
\t\t\t\t\t(stroke (width 0.508) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "C_1_1"
\t\t\t\t(pin passive line (at 0 3.81 270) (length 2.794)
\t\t\t\t\t(name "~" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at 0 -3.81 90) (length 2.794)
\t\t\t\t\t(name "~" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Device:R"
\t\t\t(pin_numbers hide)
\t\t\t(pin_names (offset 0) hide)
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "R"
\t\t\t\t(at 2.032 0 90)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "R"
\t\t\t\t(at 0 0 90)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" ""
\t\t\t\t(at -1.778 0 90)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "~"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "R_0_1"
\t\t\t\t(rectangle (start -1.016 -2.54) (end 1.016 2.54)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "R_1_1"
\t\t\t\t(pin passive line (at 0 3.81 270) (length 1.27)
\t\t\t\t\t(name "~" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at 0 -3.81 90) (length 1.27)
\t\t\t\t\t(name "~" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Device:L"
\t\t\t(pin_numbers hide)
\t\t\t(pin_names (offset 1.016) hide)
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "L"
\t\t\t\t(at -1.016 0 90)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "L"
\t\t\t\t(at 1.524 0 90)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" ""
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "~"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "L_0_1"
\t\t\t\t(arc (start 0 -2.54) (mid 0.6323 -1.905) (end 0 -1.27)
\t\t\t\t\t(stroke (width 0) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t\t(arc (start 0 -1.27) (mid 0.6323 -0.635) (end 0 0)
\t\t\t\t\t(stroke (width 0) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t\t(arc (start 0 0) (mid 0.6323 0.635) (end 0 1.27)
\t\t\t\t\t(stroke (width 0) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t\t(arc (start 0 1.27) (mid 0.6323 1.905) (end 0 2.54)
\t\t\t\t\t(stroke (width 0) (type default))
\t\t\t\t\t(fill (type none))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "L_1_1"
\t\t\t\t(pin passive line (at 0 3.81 270) (length 1.27)
\t\t\t\t\t(name "1" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at 0 -3.81 90) (length 1.27)
\t\t\t\t\t(name "2" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Connector_Generic:Conn_01x06"
\t\t\t(pin_names (offset 1.016) hide)
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "J"
\t\t\t\t(at 0 7.62 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "Conn_01x06"
\t\t\t\t(at 0 -10.16 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" ""
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "~"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "Conn_01x06_1_1"
\t\t\t\t(rectangle (start -1.27 6.35) (end 1.27 -7.62)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type background))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 5.08 0) (length 3.81)
\t\t\t\t\t(name "Pin_1" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 2.54 0) (length 3.81)
\t\t\t\t\t(name "Pin_2" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 0 0) (length 3.81)
\t\t\t\t\t(name "Pin_3" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "3" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 -2.54 0) (length 3.81)
\t\t\t\t\t(name "Pin_4" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "4" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 -5.08 0) (length 3.81)
\t\t\t\t\t(name "Pin_5" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "5" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 -7.62 0) (length 3.81)
\t\t\t\t\t(name "Pin_6" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "6" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Connector_Generic:Conn_01x02"
\t\t\t(pin_names (offset 1.016) hide)
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "J"
\t\t\t\t(at 0 2.54 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "Conn_01x02"
\t\t\t\t(at 0 -5.08 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" ""
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" "~"
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "Conn_01x02_1_1"
\t\t\t\t(rectangle (start -1.27 1.27) (end 1.27 -2.54)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type background))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 0 0) (length 3.81)
\t\t\t\t\t(name "Pin_1" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin passive line (at -5.08 -2.54 0) (length 3.81)
\t\t\t\t\t(name "Pin_2" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t\t(symbol "Regulator_Linear:AMS1117-3.3"
\t\t\t(exclude_from_sim no)
\t\t\t(in_bom yes)
\t\t\t(on_board yes)
\t\t\t(property "Reference" "U"
\t\t\t\t(at 0 5.08 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Value" "AMS1117-3.3"
\t\t\t\t(at 0 2.54 0)
\t\t\t\t(effects (font (size 1.27 1.27)))
\t\t\t)
\t\t\t(property "Footprint" "Package_TO_SOT_SMD:SOT-223-3_TabPin2"
\t\t\t\t(at 0 2.54 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(property "Datasheet" ""
\t\t\t\t(at 0 0 0)
\t\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t\t)
\t\t\t(symbol "AMS1117-3.3_0_1"
\t\t\t\t(rectangle (start -7.62 -5.08) (end 7.62 1.27)
\t\t\t\t\t(stroke (width 0.254) (type default))
\t\t\t\t\t(fill (type background))
\t\t\t\t)
\t\t\t)
\t\t\t(symbol "AMS1117-3.3_1_1"
\t\t\t\t(pin power_in line (at -10.16 -1.27 0) (length 2.54)
\t\t\t\t\t(name "GND" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "1" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_out line (at 10.16 -1.27 180) (length 2.54)
\t\t\t\t\t(name "VO" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "2" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t\t(pin power_in line (at -10.16 -3.81 0) (length 2.54)
\t\t\t\t\t(name "VI" (effects (font (size 1.27 1.27))))
\t\t\t\t\t(number "3" (effects (font (size 1.27 1.27))))
\t\t\t\t)
\t\t\t)
\t\t)
\t)

\t(text "=== SubaruDash DAC/Amp Module ==="
\t\t(exclude_from_sim no)
\t\t(at 50 20 0)
\t\t(effects (font (size 5 5)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "I2S Input from Pi"
\t\t(exclude_from_sim no)
\t\t(at 30 60 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "PCM5142 Stereo DAC"
\t\t(exclude_from_sim no)
\t\t(at 80 60 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "TPA3116D2 #1 (Front L/R)"
\t\t(exclude_from_sim no)
\t\t(at 160 60 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "TPA3116D2 #2 (Rear L/R)"
\t\t(exclude_from_sim no)
\t\t(at 160 130 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "Speaker Outputs"
\t\t(exclude_from_sim no)
\t\t(at 240 60 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "Power Input"
\t\t(exclude_from_sim no)
\t\t(at 30 160 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)
\t(text "3.3V Regulator"
\t\t(exclude_from_sim no)
\t\t(at 80 160 0)
\t\t(effects (font (size 2 2)))
\t\t(uuid "{generate_uuid()}")
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x06")
\t\t(at 35.56 82.55 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J1"
\t\t\t(at 35.56 71.12 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "I2S_Input"
\t\t\t(at 35.56 93.98 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_PinHeader_2.54mm:PinHeader_1x06_P2.54mm_Vertical"
\t\t\t(at 35.56 82.55 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 35.56 82.55 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(pin "3" (uuid "{generate_uuid()}"))
\t\t(pin "4" (uuid "{generate_uuid()}"))
\t\t(pin "5" (uuid "{generate_uuid()}"))
\t\t(pin "6" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J1") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "custom:PCM5142")
\t\t(at 82.55 95.25 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "U1"
\t\t\t(at 82.55 71.12 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "PCM5142"
\t\t\t(at 82.55 119.38 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Package_QFP:TQFP-32_7x7mm_P0.8mm"
\t\t\t(at 82.55 95.25 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "https://www.ti.com/lit/ds/symlink/pcm5142.pdf"
\t\t\t(at 82.55 95.25 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(pin "3" (uuid "{generate_uuid()}"))
\t\t(pin "4" (uuid "{generate_uuid()}"))
\t\t(pin "5" (uuid "{generate_uuid()}"))
\t\t(pin "6" (uuid "{generate_uuid()}"))
\t\t(pin "7" (uuid "{generate_uuid()}"))
\t\t(pin "14" (uuid "{generate_uuid()}"))
\t\t(pin "15" (uuid "{generate_uuid()}"))
\t\t(pin "21" (uuid "{generate_uuid()}"))
\t\t(pin "22" (uuid "{generate_uuid()}"))
\t\t(pin "23" (uuid "{generate_uuid()}"))
\t\t(pin "24" (uuid "{generate_uuid()}"))
\t\t(pin "27" (uuid "{generate_uuid()}"))
\t\t(pin "28" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "U1") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "custom:TPA3116D2")
\t\t(at 165.1 95.25 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "U2"
\t\t\t(at 165.1 66.04 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "TPA3116D2"
\t\t\t(at 165.1 124.46 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Package_SO:HTSSOP-32-1EP_5.1x11mm_P0.65mm_EP3.4x11mm"
\t\t\t(at 165.1 95.25 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "https://www.ti.com/lit/ds/symlink/tpa3116d2.pdf"
\t\t\t(at 165.1 95.25 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(pin "4" (uuid "{generate_uuid()}"))
\t\t(pin "5" (uuid "{generate_uuid()}"))
\t\t(pin "6" (uuid "{generate_uuid()}"))
\t\t(pin "7" (uuid "{generate_uuid()}"))
\t\t(pin "16" (uuid "{generate_uuid()}"))
\t\t(pin "17" (uuid "{generate_uuid()}"))
\t\t(pin "18" (uuid "{generate_uuid()}"))
\t\t(pin "19" (uuid "{generate_uuid()}"))
\t\t(pin "24" (uuid "{generate_uuid()}"))
\t\t(pin "25" (uuid "{generate_uuid()}"))
\t\t(pin "28" (uuid "{generate_uuid()}"))
\t\t(pin "29" (uuid "{generate_uuid()}"))
\t\t(pin "33" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "U2") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "custom:TPA3116D2")
\t\t(at 165.1 165.1 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "U3"
\t\t\t(at 165.1 135.89 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "TPA3116D2"
\t\t\t(at 165.1 194.31 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Package_SO:HTSSOP-32-1EP_5.1x11mm_P0.65mm_EP3.4x11mm"
\t\t\t(at 165.1 165.1 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "https://www.ti.com/lit/ds/symlink/tpa3116d2.pdf"
\t\t\t(at 165.1 165.1 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(pin "4" (uuid "{generate_uuid()}"))
\t\t(pin "5" (uuid "{generate_uuid()}"))
\t\t(pin "6" (uuid "{generate_uuid()}"))
\t\t(pin "7" (uuid "{generate_uuid()}"))
\t\t(pin "16" (uuid "{generate_uuid()}"))
\t\t(pin "17" (uuid "{generate_uuid()}"))
\t\t(pin "18" (uuid "{generate_uuid()}"))
\t\t(pin "19" (uuid "{generate_uuid()}"))
\t\t(pin "24" (uuid "{generate_uuid()}"))
\t\t(pin "25" (uuid "{generate_uuid()}"))
\t\t(pin "28" (uuid "{generate_uuid()}"))
\t\t(pin "29" (uuid "{generate_uuid()}"))
\t\t(pin "33" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "U3") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x02")
\t\t(at 35.56 177.8 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J2"
\t\t\t(at 35.56 170.18 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "12V_Input"
\t\t\t(at 35.56 185.42 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_Phoenix_MSTB:PhoenixContact_MSTBA_2,5_2-G-5,08_1x02_P5.08mm_Horizontal"
\t\t\t(at 35.56 177.8 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 35.56 177.8 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J2") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Regulator_Linear:AMS1117-3.3")
\t\t(at 82.55 177.8 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "U4"
\t\t\t(at 82.55 167.64 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "AMS1117-3.3"
\t\t\t(at 82.55 170.18 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Package_TO_SOT_SMD:SOT-223-3_TabPin2"
\t\t\t(at 82.55 175.26 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" ""
\t\t\t(at 82.55 177.8 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(pin "3" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "U4") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x02")
\t\t(at 240 80.01 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J3"
\t\t\t(at 240 72.39 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "Front_Left"
\t\t\t(at 240 87.63 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_Phoenix_MSTB:PhoenixContact_MSTBA_2,5_2-G-5,08_1x02_P5.08mm_Horizontal"
\t\t\t(at 240 80.01 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 240 80.01 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J3") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x02")
\t\t(at 240 100.33 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J4"
\t\t\t(at 240 92.71 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "Front_Right"
\t\t\t(at 240 107.95 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_Phoenix_MSTB:PhoenixContact_MSTBA_2,5_2-G-5,08_1x02_P5.08mm_Horizontal"
\t\t\t(at 240 100.33 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 240 100.33 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J4") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x02")
\t\t(at 240 149.86 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J5"
\t\t\t(at 240 142.24 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "Rear_Left"
\t\t\t(at 240 157.48 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_Phoenix_MSTB:PhoenixContact_MSTBA_2,5_2-G-5,08_1x02_P5.08mm_Horizontal"
\t\t\t(at 240 149.86 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 240 149.86 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J5") (unit 1))
\t\t\t)
\t\t)
\t)

\t(symbol
\t\t(lib_id "Connector_Generic:Conn_01x02")
\t\t(at 240 170.18 0)
\t\t(unit 1)
\t\t(exclude_from_sim no)
\t\t(in_bom yes)
\t\t(on_board yes)
\t\t(dnp no)
\t\t(uuid "{generate_uuid()}")
\t\t(property "Reference" "J6"
\t\t\t(at 240 162.56 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Value" "Rear_Right"
\t\t\t(at 240 177.8 0)
\t\t\t(effects (font (size 1.27 1.27)))
\t\t)
\t\t(property "Footprint" "Connector_Phoenix_MSTB:PhoenixContact_MSTBA_2,5_2-G-5,08_1x02_P5.08mm_Horizontal"
\t\t\t(at 240 170.18 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(property "Datasheet" "~"
\t\t\t(at 240 170.18 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t\t(pin "1" (uuid "{generate_uuid()}"))
\t\t(pin "2" (uuid "{generate_uuid()}"))
\t\t(instances
\t\t\t(project "dac-amp"
\t\t\t\t(path "/" (reference "J6") (unit 1))
\t\t\t)
\t\t)
\t)

\t(global_label "I2S_BCK"
\t\t(shape input)
\t\t(at 30.48 77.47 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "I2S_LRCK"
\t\t(shape input)
\t\t(at 30.48 80.01 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "I2S_DIN"
\t\t(shape input)
\t\t(at 30.48 82.55 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "+3.3V"
\t\t(shape input)
\t\t(at 30.48 85.09 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "GND"
\t\t(shape input)
\t\t(at 30.48 87.63 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "+12V"
\t\t(shape input)
\t\t(at 30.48 177.8 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "GND"
\t\t(shape input)
\t\t(at 30.48 180.34 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "DAC_OUTL+"
\t\t(shape output)
\t\t(at 97.79 85.09 0)
\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "DAC_OUTL-"
\t\t(shape output)
\t\t(at 97.79 87.63 0)
\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "DAC_OUTR+"
\t\t(shape output)
\t\t(at 97.79 92.71 0)
\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "DAC_OUTR-"
\t\t(shape output)
\t\t(at 97.79 95.25 0)
\t\t(effects (font (size 1.27 1.27)) (justify left))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_FL+"
\t\t(shape output)
\t\t(at 234.95 80.01 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_FL-"
\t\t(shape output)
\t\t(at 234.95 82.55 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_FR+"
\t\t(shape output)
\t\t(at 234.95 100.33 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_FR-"
\t\t(shape output)
\t\t(at 234.95 102.87 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_RL+"
\t\t(shape output)
\t\t(at 234.95 149.86 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_RL-"
\t\t(shape output)
\t\t(at 234.95 152.4 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_RR+"
\t\t(shape output)
\t\t(at 234.95 170.18 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)
\t(global_label "SPK_RR-"
\t\t(shape output)
\t\t(at 234.95 172.72 180)
\t\t(effects (font (size 1.27 1.27)) (justify right))
\t\t(uuid "{generate_uuid()}")
\t\t(property "Intersheetrefs" "${{INTERSHEET_REFS}}"
\t\t\t(at 0 0 0)
\t\t\t(effects (font (size 1.27 1.27)) (hide yes))
\t\t)
\t)

\t(sheet_instances
\t\t(path "/"
\t\t\t(page "1")
\t\t)
\t)
)
'''
    return sch


def main():
    script_dir = Path(__file__).parent
    dac_amp_dir = script_dir / "dac-amp"
    output_file = dac_amp_dir / "dac-amp.kicad_sch"

    print("=" * 60)
    print("DAC/Amp Schematic Generator")
    print("=" * 60)

    schematic = create_schematic()

    with open(output_file, 'w', encoding='utf-8') as f:
        f.write(schematic)

    print(f"\nCreated: {output_file}")
    print("\nComponents included:")
    print("  U1: PCM5142 - Stereo I2S DAC")
    print("  U2: TPA3116D2 - Class D Amp (Front L/R)")
    print("  U3: TPA3116D2 - Class D Amp (Rear L/R)")
    print("  U4: AMS1117-3.3 - 3.3V LDO Regulator")
    print("  J1: I2S Input (6-pin)")
    print("  J2: 12V Power Input")
    print("  J3-J6: Speaker Outputs (FL, FR, RL, RR)")
    print("\nNote: This is a starting schematic. You'll need to:")
    print("1. Add decoupling capacitors for each IC")
    print("2. Add LC output filters for the Class D amps")
    print("3. Add input coupling capacitors between DAC and amp")
    print("4. Wire the components together in KiCad")
    print("5. Run ERC and fix any issues")


if __name__ == "__main__":
    main()
